---
interface Props {
  title: string;
  activeNav?: string;
  tripPrefix?: string;
  tripName?: string;
  tripEmoji?: string;
  tripFooter?: string;
  themeCSS?: string;
}

const {
  title,
  activeNav,
  tripPrefix = '/japan2026',
  tripName = 'Japan 2026',
  tripEmoji = 'â›©ï¸',
  tripFooter = 'ğŸŒ¸ Japan Trip â€” September 19 to October 3, 2026 ğŸŒ¸',
  themeCSS = '',
} = Astro.props;

const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const prefix = `${base}${tripPrefix}`;

const navItems = [
  { href: `${prefix}`, label: 'ğŸ  Home', id: 'home' },
  { href: `${prefix}/itinerary`, label: 'ğŸ—¾ Itinerary', id: 'itinerary' },
  { href: `${prefix}/restaurants`, label: 'ğŸ£ Restaurants', id: 'restaurants' },
  { href: `${prefix}/bookings`, label: 'ğŸ“‹ Bookings', id: 'bookings' },
  { href: `${prefix}/budget`, label: 'ğŸ’° Budget', id: 'budget' },
  { href: `${prefix}/practical-info`, label: 'ğŸ“– Practical Info', id: 'practical-info' },
];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} â€” {tripName}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    {themeCSS && <style set:html={themeCSS} />}
  </head>
  <body>
    <header>
      <div class="header-inner">
        <a href={`${base}/`} class="back-link" title="All Travels">â†</a>
        <a href={`${prefix}`} class="logo">
          <span class="torii">{tripEmoji}</span>
          <span class="logo-text">{tripName}</span>
        </a>
        <button class="menu-toggle" aria-label="Toggle menu">â˜°</button>
        <nav>
          {navItems.map((item) => (
            <a href={item.href} class:list={[{ active: activeNav === item.id }]}>
              {item.label}
            </a>
          ))}
        </nav>
      </div>
    </header>

    <main>
      <div class="container">
        <slot />
      </div>
    </main>

    <footer>
      <div class="wave-pattern"></div>
      <div class="footer-inner">
        <p>{tripFooter}</p>
      </div>
    </footer>

    <script>
      const toggle = document.querySelector('.menu-toggle');
      const nav = document.querySelector('nav');
      toggle?.addEventListener('click', () => {
        nav?.classList.toggle('open');
      });
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
